import{a as S,c as j,d as x,e as q,f as I,g as c,h as O,j as R,k as T,l as _}from"./chunk-A63MY2IC.js";import{a as D}from"./chunk-PERY4QMG.js";import{Ba as w,C as b,M as s,d as g,g as y,h as m,i as d,k as v,n as o,u as k}from"./chunk-BR23CZRW.js";import{a as u,b as l}from"./chunk-ACKELEN3.js";function f(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&k(f);let a=t?e?.injector?.get(b)??o(b):null,h=M(e?.equal),i;e?.requireSync?i=s({kind:0},{equal:h}):i=s({kind:1,value:e?.initialValue},{equal:h});let p=n.subscribe({next:r=>i.set({kind:1,value:r}),error:r=>{if(e?.rejectErrors)throw r;i.set({kind:2,error:r})}});if(e?.requireSync&&i().kind===0)throw new d(601,!1);return a?.onDestroy(p.unsubscribe.bind(p)),w(()=>{let r=i();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function M(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var F="tasks",C=class n{_fireStore=o(S);_collection=q(this._fireStore,F);_authState=o(D);_query=R(this._collection,_("userId","==",this._authState.currentUser?.uid));loading=s(!0);getTasks=f(j(this._query,{idField:"id"}).pipe(m(()=>{this.loading.set(!1)}),y(e=>(this.loading.set(!1),g(()=>e)))),{initialValue:[]});getTask(e){let t=c(this._collection,e);return O(t)}create(e){return x(this._collection,l(u({},e),{userId:this._authState.currentUser?.uid}))}update(e,t){let a=c(this._collection,t);return T(a,l(u({},e),{userId:this._authState.currentUser?.uid}))}delete(e){let t=c(this._collection,e);return I(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=v({token:n,factory:n.\u0275fac})};export{C as a};
