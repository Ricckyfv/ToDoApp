import{a as N,b as F,c as l,d as D,e as q,f as V,g as B,h as M,i as j,j as A,k as G,l as R,m as P,n as I}from"./chunk-QTZCV3XS.js";import{a as p}from"./chunk-WNPNFEV6.js";import"./chunk-A63MY2IC.js";import{a as g}from"./chunk-BWIDBRTN.js";import"./chunk-PERY4QMG.js";import{$ as e,Da as T,G as y,J as s,M as x,Qa as E,R as f,Ra as _,_ as t,aa as n,da as v,ka as r,la as w,ma as S,n as d,na as C,p as h}from"./chunk-BR23CZRW.js";import{e as c}from"./chunk-ACKELEN3.js";var b=class k{_formBuilder=d(P);_taskService=d(p);_router=d(E);loading=x(!1);idTask=y.required();form=this._formBuilder.group({title:this._formBuilder.control("",l.required),completed:this._formBuilder.control(!1,l.required),category:["",l.required],priority:["media",l.required],dueDate:[""]});constructor(){T(()=>{let i=this.idTask();i&&this.getTask(i)})}getTask(i){return c(this,null,function*(){let o=yield this._taskService.getTask(i);if(!o.exists())return;let a=o.data();this.form.patchValue(a)})}submit(){return c(this,null,function*(){if(!this.form.invalid)try{this.loading.set(!0);let{title:i,completed:o,dueDate:a}=this.form.value,u={title:i||"",completed:!!o,category:this.form.value.category||"",priority:this.form.get("priority")?.value||"media",dueDate:a||""},m=this.idTask();m?yield this._taskService.update(u,m):yield this._taskService.create(u),g.success(`Task ${m?"editadp":"creado"} correctamente`),this._router.navigateByUrl("/tasks")}catch{g.error("Error al crear o editar la tarea")}finally{this.loading.set(!1)}})}static \u0275fac=function(o){return new(o||k)};static \u0275cmp=h({type:k,selectors:[["app-task-form"]],inputs:{idTask:[1,"idTask"]},standalone:!0,features:[S([p]),C],decls:35,vars:3,consts:[[1,"mx-auto","w-full","max-w-screen-sm","px-4","text-white"],[1,"text-right","mb-3"],["routerLink","/task-list","type","button",1,"focus:outline-none","text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:ring-green-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"],["action","#",1,"space-y-4","md:space-y-6",3,"ngSubmit","formGroup"],["for","category",1,"block","mb-2","text-sm","font-medium","text-white","dark:text-white"],["type","text","name","category","id","category","required","","formControlName","category",1,"bg-gray-600","border","border-gray-300","text-white","rounded-lg","focus:ring-green-600","focus:border-green-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","title",1,"block","mb-2","text-sm","font-medium","text-white","dark:text-white"],["type","text","name","title","id","title","required","","formControlName","title",1,"bg-gray-600","border","border-gray-300","text-white","rounded-lg","focus:ring-green-600","focus:border-green-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","priority",1,"block","mb-2","text-sm","font-medium","text-white","dark:text-white"],["id","priority","formControlName","priority",1,"bg-gray-600","border","border-gray-300","text-white","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value","baja"],["value","media","selected",""],["value","alta"],[1,"block","mb-2","text-sm","font-medium","text-white","dark:text-white"],["type","datetime-local","formControlName","dueDate",1,"bg-gray-600","border","border-gray-300","text-white","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"inline-flex","items-center","cursor-pointer"],["formControlName","completed","type","checkbox","value","",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600","dark:peer-checked:bg-blue-600"],[1,"ms-3","text-sm","font-medium","text-white","dark:text-gray-300"],["type","submit",1,"w-full","text-white","bg-green-600","hover:bg-green-700","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"disabled"]],template:function(o,a){o&1&&(t(0,"section",0)(1,"div",1)(2,"button",2),r(3," Volver "),e()(),t(4,"form",3),v("ngSubmit",function(){return a.submit()}),t(5,"div")(6,"label",4),r(7,"Categoria"),e(),n(8,"input",5),e(),t(9,"div")(10,"label",6),r(11,"T\xEDtulo"),e(),n(12,"input",7),e(),t(13,"div")(14,"label",8),r(15,"Prioridad"),e(),t(16,"select",9)(17,"option",10),r(18,"Baja"),e(),t(19,"option",11),r(20,"Media"),e(),t(21,"option",12),r(22,"Alta"),e()()(),t(23,"div")(24,"label",13),r(25,"Fecha y hora"),e(),n(26,"input",14),e(),t(27,"div")(28,"label",15),n(29,"input",16)(30,"div",17),t(31,"span",18),r(32,"Completado"),e()()(),t(33,"button",19),r(34),e()()()),o&2&&(s(4),f("formGroup",a.form),s(29),f("disabled",a.loading()),s(),w(" ",a.loading()?a.idTask()?"Editando...":"Creando...":a.idTask()?"Editar":"Crear"," "))},dependencies:[I,V,A,G,F,N,j,D,q,R,B,M,_]})};export{b as default};
